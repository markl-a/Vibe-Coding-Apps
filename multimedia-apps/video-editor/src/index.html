<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Video Editor - 专业视频编辑器</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <!-- 主容器 -->
  <div class="app-container">

    <!-- 顶部工具栏 -->
    <header class="toolbar">
      <div class="toolbar-section">
        <div class="logo">
          <svg width="32" height="32" viewBox="0 0 32 32">
            <rect x="4" y="8" width="24" height="16" fill="none" stroke="currentColor" stroke-width="2"/>
            <polygon points="13,12 13,20 20,16" fill="currentColor"/>
          </svg>
          <span>Video Editor</span>
        </div>
      </div>

      <div class="toolbar-section toolbar-actions">
        <button id="newProjectBtn" class="btn btn-secondary" title="新建项目">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
            <polyline points="14 2 14 8 20 8"/>
            <line x1="12" y1="18" x2="12" y2="12"/>
            <line x1="9" y1="15" x2="15" y2="15"/>
          </svg>
          新建
        </button>
        <button id="openProjectBtn" class="btn btn-secondary" title="打开项目">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M3 7v10a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-6l-2-2H5a2 2 0 0 0-2 2z"/>
          </svg>
          打开
        </button>
        <button id="saveProjectBtn" class="btn btn-secondary" title="保存项目">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"/>
            <polyline points="17 21 17 13 7 13 7 21"/>
            <polyline points="7 3 7 8 15 8"/>
          </svg>
          保存
        </button>
        <div class="divider"></div>
        <button id="undoBtn" class="btn btn-icon" title="撤销 (Ctrl+Z)" disabled>
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M3 7v6h6"/>
            <path d="M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13"/>
          </svg>
        </button>
        <button id="redoBtn" class="btn btn-icon" title="重做 (Ctrl+Y)" disabled>
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M21 7v6h-6"/>
            <path d="M3 17a9 9 0 0 1 9-9 9 9 0 0 1 6 2.3l3 2.7"/>
          </svg>
        </button>
      </div>

      <div class="toolbar-section">
        <button id="exportBtn" class="btn btn-primary">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
            <polyline points="7 10 12 15 17 10"/>
            <line x1="12" y1="15" x2="12" y2="3"/>
          </svg>
          导出视频
        </button>
      </div>
    </header>

    <!-- 主工作区 -->
    <div class="workspace">

      <!-- 左侧面板 - 媒体库和工具 -->
      <aside class="sidebar left-panel">
        <div class="panel-tabs">
          <button class="tab-btn active" data-tab="media">媒体</button>
          <button class="tab-btn" data-tab="effects">特效</button>
          <button class="tab-btn" data-tab="text">文字</button>
        </div>

        <!-- 媒体库标签页 -->
        <div class="tab-content active" data-content="media">
          <div class="panel-section">
            <div class="section-header">
              <h3>视频素材</h3>
              <button id="importVideoBtn" class="btn btn-small">
                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <line x1="12" y1="5" x2="12" y2="19"/>
                  <line x1="5" y1="12" x2="19" y2="12"/>
                </svg>
                导入
              </button>
            </div>
            <div id="videoList" class="media-list">
              <div class="empty-state">
                <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1">
                  <rect x="3" y="3" width="18" height="18" rx="2" ry="2"/>
                  <circle cx="8.5" cy="8.5" r="1.5"/>
                  <polyline points="21 15 16 10 5 21"/>
                </svg>
                <p>点击"导入"添加视频</p>
              </div>
            </div>
          </div>

          <div class="panel-section">
            <div class="section-header">
              <h3>音频素材</h3>
              <button id="importAudioBtn" class="btn btn-small">
                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <line x1="12" y1="5" x2="12" y2="19"/>
                  <line x1="5" y1="12" x2="19" y2="12"/>
                </svg>
                导入
              </button>
            </div>
            <div id="audioList" class="media-list">
              <div class="empty-state">
                <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1">
                  <path d="M9 18V5l12-2v13"/>
                  <circle cx="6" cy="18" r="3"/>
                  <circle cx="18" cy="16" r="3"/>
                </svg>
                <p>点击"导入"添加音频</p>
              </div>
            </div>
          </div>
        </div>

        <!-- 特效标签页 -->
        <div class="tab-content" data-content="effects">
          <div class="panel-section">
            <h3>滤镜效果</h3>
            <div class="effects-grid">
              <button class="effect-item" data-effect="none">
                <div class="effect-preview">原始</div>
                <span>无滤镜</span>
              </button>
              <button class="effect-item" data-effect="grayscale">
                <div class="effect-preview" style="filter: grayscale(1);">灰度</div>
                <span>黑白</span>
              </button>
              <button class="effect-item" data-effect="sepia">
                <div class="effect-preview" style="filter: sepia(1);">怀旧</div>
                <span>复古</span>
              </button>
              <button class="effect-item" data-effect="blur">
                <div class="effect-preview" style="filter: blur(2px);">模糊</div>
                <span>模糊</span>
              </button>
            </div>

            <div class="control-group">
              <label>亮度</label>
              <input type="range" id="brightnessSlider" min="-50" max="50" value="0" step="1">
              <span id="brightnessValue">0</span>
            </div>

            <div class="control-group">
              <label>对比度</label>
              <input type="range" id="contrastSlider" min="-50" max="50" value="0" step="1">
              <span id="contrastValue">0</span>
            </div>

            <div class="control-group">
              <label>饱和度</label>
              <input type="range" id="saturationSlider" min="-50" max="50" value="0" step="1">
              <span id="saturationValue">0</span>
            </div>

            <button id="applyEffectsBtn" class="btn btn-primary btn-block">应用特效</button>
          </div>
        </div>

        <!-- 文字标签页 -->
        <div class="tab-content" data-content="text">
          <div class="panel-section">
            <h3>添加文字</h3>

            <div class="control-group">
              <label>文字内容</label>
              <textarea id="textContent" rows="3" placeholder="输入文字内容..."></textarea>
            </div>

            <div class="control-group">
              <label>字体大小</label>
              <input type="number" id="fontSize" value="36" min="12" max="200">
            </div>

            <div class="control-group">
              <label>文字颜色</label>
              <input type="color" id="textColor" value="#ffffff">
            </div>

            <div class="control-group">
              <label>X 位置</label>
              <input type="number" id="textX" value="50" min="0">
            </div>

            <div class="control-group">
              <label>Y 位置</label>
              <input type="number" id="textY" value="50" min="0">
            </div>

            <div class="control-group">
              <label>开始时间 (秒)</label>
              <input type="number" id="textStartTime" value="0" min="0" step="0.1">
            </div>

            <div class="control-group">
              <label>结束时间 (秒)</label>
              <input type="number" id="textEndTime" value="5" min="0" step="0.1">
            </div>

            <button id="addTextBtn" class="btn btn-primary btn-block">添加文字</button>
          </div>

          <div class="panel-section">
            <h3>文字列表</h3>
            <div id="textList" class="text-list">
              <div class="empty-state">
                <p>暂无文字</p>
              </div>
            </div>
          </div>
        </div>
      </aside>

      <!-- 中央预览区 -->
      <main class="preview-area">
        <div class="preview-container">
          <div id="previewWrapper" class="preview-wrapper">
            <video id="videoPreview" class="video-preview" controls>
              <source src="" type="video/mp4">
              您的浏览器不支持视频播放。
            </video>
            <div id="placeholderScreen" class="placeholder-screen">
              <svg width="120" height="120" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1">
                <rect x="2" y="7" width="20" height="15" rx="2" ry="2"/>
                <polygon points="10 9 10 15 15 12" fill="currentColor" stroke="none"/>
              </svg>
              <h2>开始您的创作</h2>
              <p>导入视频文件或打开项目</p>
            </div>
          </div>

          <!-- 播放控制 -->
          <div class="playback-controls">
            <button id="playPauseBtn" class="btn-control" disabled>
              <svg id="playIcon" width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                <polygon points="5 3 19 12 5 21 5 3"/>
              </svg>
              <svg id="pauseIcon" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" style="display: none;">
                <rect x="6" y="4" width="4" height="16"/>
                <rect x="14" y="4" width="4" height="16"/>
              </svg>
            </button>

            <button id="stopBtn" class="btn-control" disabled>
              <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                <rect x="6" y="6" width="12" height="12"/>
              </svg>
            </button>

            <span id="currentTime" class="time-display">00:00</span>
            <div class="progress-bar">
              <input type="range" id="seekBar" min="0" max="100" value="0" step="0.1" disabled>
              <div id="progressFill" class="progress-fill"></div>
            </div>
            <span id="totalTime" class="time-display">00:00</span>

            <div class="volume-control">
              <button id="muteBtn" class="btn-control">
                <svg id="volumeIcon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"/>
                  <path d="M19.07 4.93a10 10 0 0 1 0 14.14"/>
                  <path d="M15.54 8.46a5 5 0 0 1 0 7.07"/>
                </svg>
              </button>
              <input type="range" id="volumeSlider" min="0" max="100" value="100">
            </div>
          </div>
        </div>

        <!-- 视频信息 -->
        <div id="videoInfo" class="video-info" style="display: none;">
          <div class="info-item">
            <span class="label">文件名:</span>
            <span id="infoFileName">-</span>
          </div>
          <div class="info-item">
            <span class="label">分辨率:</span>
            <span id="infoResolution">-</span>
          </div>
          <div class="info-item">
            <span class="label">时长:</span>
            <span id="infoDuration">-</span>
          </div>
          <div class="info-item">
            <span class="label">帧率:</span>
            <span id="infoFPS">-</span>
          </div>
        </div>
      </main>

      <!-- 右侧面板 - 属性和编辑 -->
      <aside class="sidebar right-panel">
        <div class="panel-tabs">
          <button class="tab-btn active" data-tab="clip">剪辑</button>
          <button class="tab-btn" data-tab="timeline">时间轴</button>
        </div>

        <!-- 剪辑工具标签页 -->
        <div class="tab-content active" data-content="clip">
          <div class="panel-section">
            <h3>剪辑工具</h3>

            <div class="control-group">
              <label>入点 (秒)</label>
              <input type="number" id="inPoint" value="0" min="0" step="0.1" disabled>
              <button id="setInPointBtn" class="btn btn-small" disabled>设置入点</button>
            </div>

            <div class="control-group">
              <label>出点 (秒)</label>
              <input type="number" id="outPoint" value="0" min="0" step="0.1" disabled>
              <button id="setOutPointBtn" class="btn btn-small" disabled>设置出点</button>
            </div>

            <button id="cutBtn" class="btn btn-primary btn-block" disabled>
              <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <circle cx="6" cy="6" r="3"/>
                <circle cx="6" cy="18" r="3"/>
                <line x1="20" y1="4" x2="8.12" y2="15.88"/>
                <line x1="14.47" y1="14.48" x2="20" y2="20"/>
                <line x1="8.12" y1="8.12" x2="12" y2="12"/>
              </svg>
              剪切片段
            </button>

            <button id="splitBtn" class="btn btn-secondary btn-block" disabled>
              <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <line x1="12" y1="2" x2="12" y2="22"/>
                <path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"/>
              </svg>
              在当前位置分割
            </button>
          </div>

          <div class="panel-section">
            <h3>快速操作</h3>
            <button id="trimStartBtn" class="btn btn-secondary btn-block" disabled>修剪开头</button>
            <button id="trimEndBtn" class="btn btn-secondary btn-block" disabled>修剪结尾</button>
            <button id="deleteClipBtn" class="btn btn-danger btn-block" disabled>删除选中片段</button>
          </div>
        </div>

        <!-- 时间轴标签页 -->
        <div class="tab-content" data-content="timeline">
          <div class="panel-section">
            <h3>时间轴片段</h3>
            <div id="clipsList" class="clips-list">
              <div class="empty-state">
                <p>时间轴为空</p>
              </div>
            </div>
          </div>

          <div class="panel-section">
            <h3>轨道管理</h3>
            <button id="addVideoTrackBtn" class="btn btn-secondary btn-block">添加视频轨道</button>
            <button id="addAudioTrackBtn" class="btn btn-secondary btn-block">添加音频轨道</button>
          </div>
        </div>
      </aside>
    </div>

    <!-- 底部时间轴 -->
    <div class="timeline-container">
      <div class="timeline-header">
        <div class="timeline-controls">
          <button id="zoomInBtn" class="btn btn-icon" title="放大">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <circle cx="11" cy="11" r="8"/>
              <line x1="21" y1="21" x2="16.65" y2="16.65"/>
              <line x1="11" y1="8" x2="11" y2="14"/>
              <line x1="8" y1="11" x2="14" y2="11"/>
            </svg>
          </button>
          <button id="zoomOutBtn" class="btn btn-icon" title="缩小">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <circle cx="11" cy="11" r="8"/>
              <line x1="21" y1="21" x2="16.65" y2="16.65"/>
              <line x1="8" y1="11" x2="14" y2="11"/>
            </svg>
          </button>
          <button id="fitTimelineBtn" class="btn btn-icon" title="适应窗口">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M8 3H5a2 2 0 0 0-2 2v3m18 0V5a2 2 0 0 0-2-2h-3m0 18h3a2 2 0 0 0 2-2v-3M3 16v3a2 2 0 0 0 2 2h3"/>
            </svg>
          </button>
        </div>
        <div class="timeline-title">时间轴</div>
      </div>

      <div class="timeline-tracks">
        <div class="track-labels">
          <div class="track-label">视频</div>
          <div class="track-label">音频</div>
          <div class="track-label">文字</div>
        </div>

        <div class="timeline-content">
          <canvas id="timelineCanvas" width="1000" height="150"></canvas>
          <div id="playhead" class="playhead"></div>
        </div>
      </div>
    </div>
  </div>

  <!-- 进度对话框 -->
  <div id="progressModal" class="modal">
    <div class="modal-content">
      <h3>正在导出视频...</h3>
      <div class="progress-container">
        <div id="exportProgress" class="progress-bar-fill"></div>
      </div>
      <p id="progressText">0%</p>
      <button id="cancelExportBtn" class="btn btn-secondary">取消</button>
    </div>
  </div>

  <!-- 提示消息 -->
  <div id="toast" class="toast"></div>

  <script src="renderer.js"></script>
</body>
</html>
