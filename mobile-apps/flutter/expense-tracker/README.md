# 記帳應用 (Expense Tracker)
🤖 **AI-Powered** 🚀

一個功能完整的 Flutter 記帳應用，整合 AI 智能功能，幫助用戶管理個人財務、追蹤支出並設定預算。

## 功能特點

### 核心功能
- 💰 **收支記錄** - 快速記錄收入和支出
- 📊 **分類管理** - 自訂支出類別（餐飲、交通、娛樂等）
- 🎯 **預算設定** - 為不同類別設定月度預算
- 📈 **數據分析** - 視覺化顯示財務數據和趨勢
- 📅 **時間篩選** - 按日、週、月查看記錄
- 💳 **多帳戶** - 支援信用卡、現金、銀行帳戶
- 🔍 **搜尋功能** - 快速找到特定交易記錄
- 📤 **數據匯出** - 導出 CSV/JSON/HTML 格式報表

### 🤖 AI 智能功能（全新！）
- **🎯 智能分類建議** - AI 根據交易描述自動推薦類別
- **💡 財務健康分析** - 即時分析收支狀況，提供個性化建議
- **🔮 支出預測** - 基於歷史數據預測未來支出趨勢
- **📊 智能預算建議** - AI 基於 50/30/20 法則推薦最佳預算分配
- **🔍 異常檢測** - 自動識別異常支出模式
- **📸 OCR 發票掃描** - 拍照自動識別發票資訊（模擬實現）
- **🏷️ 智能標籤** - 自動為交易添加相關標籤

### 技術特點
- 使用 Provider 進行狀態管理
- SQLite 本地資料庫儲存
- FL Chart 繪製精美圖表
- Material Design 3 設計風格
- 支援深色模式
- 流暢的頁面切換動畫

## 安裝與運行

### 前置要求
- Flutter SDK 3.0+
- Dart 3.0+
- Android Studio / VS Code

### 安裝步驟

1. **進入專案目錄**
```bash
cd expense-tracker
```

2. **安裝依賴**
```bash
flutter pub get
```

3. **運行應用**
```bash
# Android
flutter run

# iOS
flutter run -d ios

# Web
flutter run -d chrome
```

## 專案結構

```
expense-tracker/
├── lib/
│   ├── main.dart                 # 應用入口
│   ├── models/                   # 資料模型
│   │   ├── transaction.dart      # 交易記錄模型
│   │   ├── category.dart         # 類別模型
│   │   └── budget.dart           # 預算模型
│   ├── screens/                  # 頁面
│   │   ├── home_screen.dart      # 首頁
│   │   ├── add_transaction_screen.dart
│   │   ├── statistics_screen.dart
│   │   ├── budget_screen.dart
│   │   └── settings_screen.dart
│   ├── widgets/                  # 可重用組件
│   │   ├── transaction_card.dart
│   │   ├── category_icon.dart
│   │   └── budget_progress.dart
│   ├── providers/                # 狀態管理
│   │   └── transaction_provider.dart
│   ├── utils/                    # 工具函數
│   │   ├── constants.dart
│   │   ├── database_helper.dart
│   │   └── helpers.dart
│   └── theme/                    # 主題配置
│       └── app_theme.dart
├── assets/                       # 資源文件
├── pubspec.yaml                  # 依賴配置
└── README.md
```

## 使用說明

### 添加交易記錄
1. 點擊首頁的「+」按鈕
2. 選擇類型（支出/收入）
3. 選擇類別
4. 輸入金額和備註
5. 儲存記錄

### 設定預算
1. 進入「預算」頁面
2. 選擇類別
3. 設定月度預算金額
4. 系統會自動追蹤預算使用情況

### 查看統計
- 「統計」頁面顯示：
  - 本月收支概覽
  - 支出類別分佈圖
  - 每日支出趨勢
  - 與上月對比

## 預設類別

### 支出類別
- 🍔 餐飲
- 🚗 交通
- 🏠 居家
- 🎮 娛樂
- 🛒 購物
- 💊 醫療
- 📚 教育
- 💼 工作
- ✈️ 旅遊
- 📱 通訊
- 💡 其他

### 收入類別
- 💰 薪資
- 📈 投資
- 🎁 獎金
- 💵 其他收入

## 資料儲存

應用使用 SQLite 進行本地資料儲存，所有數據都保存在設備上。

資料庫表結構：
- `transactions` - 交易記錄
- `categories` - 類別設定
- `budgets` - 預算設定

## 自訂功能

### 添加新類別

```dart
final newCategory = Category(
  id: 'custom_1',
  name: '寵物',
  icon: Icons.pets,
  color: Colors.brown,
  type: CategoryType.expense,
);

await provider.addCategory(newCategory);
```

### 修改主題色

在 `lib/theme/app_theme.dart` 中修改：

```dart
ColorScheme.fromSeed(
  seedColor: Colors.teal, // 修改為你喜歡的顏色
)
```

## 數據匯出

支援將交易記錄匯出為 CSV 格式：
1. 進入「設定」頁面
2. 點擊「匯出數據」
3. 選擇時間範圍
4. 檔案會保存到下載資料夾

## 效能優化

- 使用 `const` 建構子減少重建
- ListView.builder 實現列表虛擬滾動
- 資料庫查詢使用索引和分頁
- 圖表數據緩存

## 🤖 AI 功能詳細說明

### 智能分類建議
當您輸入交易描述時，AI 會自動分析關鍵字並結合歷史記錄，推薦最合適的類別。例如：
- 「麥當勞午餐」→ 自動建議「餐飲」類別
- 「加油站」→ 自動建議「交通」類別
- 「診所看病」→ 自動建議「醫療」類別

### 財務健康分析
AI 會根據您的收支狀況提供實時建議：
- 💰 儲蓄率分析：評估您的儲蓄比例是否健康
- ⚠️ 超支警告：預算即將用完時提醒您
- 📊 支出結構分析：識別支出比例過高的類別
- 💡 智能建議：提供實用的財務管理小貼士

### 支出預測
基於最近 3 個月的消費模式和趨勢，AI 預測下個月的預期支出，幫助您提前規劃預算。

### 智能預算建議
輸入您的月收入，AI 會基於：
- 50/30/20 預算法則
- 您的歷史支出模式
- 各類別的消費習慣

為您量身定制最佳的預算分配方案。

### 異常檢測
AI 自動監控您的交易記錄，識別：
- 🚨 異常大額支出（超過平均值 2 倍標準差）
- ⚡ 頻繁的小額消費累積
- 📈 支出模式突然改變

### OCR 發票掃描
拍攝發票照片，AI 自動識別：
- 商家名稱
- 總金額
- 消費項目
- 日期時間
- 自動建議類別和描述

*注意：當前為模擬實現，展示 OCR 工作流程*

### 數據導出功能
支援多種格式導出：
- **CSV 格式** - 適合 Excel 分析
- **JSON 格式** - 適合數據處理
- **HTML 報表** - 精美的可視化財務報告
- **統計摘要** - 快速了解財務概況

## 使用指南

### 使用 AI 財務助手
1. 點擊首頁的 ✨ 圖標進入 AI 助手
2. 查看四個智能功能標籤：
   - **💡 建議** - 查看財務健康分析和智能建議
   - **🔮 預測** - 查看下月支出預測
   - **🔍 異常** - 查看異常支出檢測
   - **📊 預算** - 獲取 AI 預算建議

### 智能記帳
1. 添加交易時，輸入描述
2. AI 自動推薦類別
3. AI 生成智能標籤
4. 一鍵保存

### 導出數據
1. 進入設定頁面
2. 選擇導出格式
3. 選擇時間範圍
4. 文件保存到下載資料夾

## 未來規劃

- [x] AI 智能分類建議 ✅
- [x] AI 財務健康分析 ✅
- [x] AI 支出預測 ✅
- [x] OCR 發票掃描 ✅
- [x] 數據導出功能 ✅
- [ ] 雲端同步 - Firebase 整合
- [ ] 真實 OCR API 整合
- [ ] 定期交易 - 自動記錄固定支出
- [ ] 財務目標 - 儲蓄計劃追蹤
- [ ] 多語言支援
- [ ] 語音記帳功能

## 貢獻

歡迎提交 Issue 和 Pull Request！

## 授權

MIT License

---

**開發環境**: Flutter 3.16+ | Dart 3.0+
**最後更新**: 2025-01-18
**維護狀態**: ✅ 活躍開發
**AI 功能**: ✅ 完全整合
