# 文件加密工具 | File Encryptor

> 🦀 **Tauri + React** | 輕量級跨平台文件加密桌面應用

一個使用 Tauri 框架開發的文件加密工具，提供簡單安全的文件加密和解密功能。

## ✨ 功能特點

- 🔐 **AES-256 加密**: 使用業界標準的 AES-256-GCM 加密演算法
- 📁 **檔案拖放**: 支援拖放檔案進行加密/解密
- 🔑 **密碼保護**: 使用密碼保護加密檔案
- 💾 **批次處理**: 支援一次加密/解密多個檔案
- ⚡ **快速處理**: Rust 後端保證高效能處理
- 🖥️ **跨平台**: Windows、macOS、Linux 全平台支援
- 🎨 **簡潔介面**: 直觀易用的操作介面

## 🛠️ 技術棧

- **前端**: React 18 + TypeScript
- **後端**: Rust + Tauri 2.0
- **加密**: AES-256-GCM (ring crate)
- **密鑰派生**: PBKDF2-HMAC-SHA256
- **UI**: 原生 CSS

## 📋 使用說明

### 加密檔案

1. 點擊「選擇檔案」或拖放檔案到應用
2. 輸入加密密碼（建議使用強密碼）
3. 點擊「加密檔案」
4. 加密後的檔案會儲存為 `.enc` 擴展名

### 解密檔案

1. 點擊「選擇檔案」或拖放 `.enc` 檔案到應用
2. 輸入解密密碼（與加密時的密碼相同）
3. 點擊「解密檔案」
4. 解密後的檔案會還原原始檔案名稱

## 🔐 安全性說明

### 加密演算法

- **演算法**: AES-256-GCM（Galois/Counter Mode）
- **密鑰長度**: 256 位元
- **密鑰派生**: PBKDF2-HMAC-SHA256（100,000 次迭代）
- **鹽值**: 每次加密生成隨機 32 位元組鹽值
- **隨機數**: 每次加密生成隨機 12 位元組 nonce

### 檔案格式

加密檔案格式（`.enc`）：
```
[32 bytes salt][12 bytes nonce][encrypted data][16 bytes tag]
```

### 安全建議

1. **使用強密碼**: 至少 12 個字元，包含大小寫字母、數字和符號
2. **妥善保管密碼**: 密碼遺失將無法解密檔案
3. **備份原始檔案**: 加密前建議備份原始檔案
4. **定期更換密碼**: 對敏感檔案定期重新加密

## 🚀 快速開始

### 先決條件

請確保已安裝：
- Node.js 18+ 和 npm/yarn/pnpm
- Rust 1.70+
- 平台特定依賴（見主 README）

### 安裝依賴

```bash
# 安裝前端依賴
npm install

# Rust 依賴會在建置時自動安裝
```

### 開發模式

```bash
npm run tauri dev
```

### 建置應用

```bash
npm run tauri build
```

## 📁 專案結構

```
file-encryptor/
├── src/                      # React 前端
│   ├── App.tsx              # 主應用元件
│   ├── main.tsx             # React 入口
│   ├── styles.css           # 樣式
│   └── types.ts             # TypeScript 型別定義
├── src-tauri/               # Rust 後端
│   ├── src/
│   │   └── main.rs         # Tauri 主程式（加密邏輯）
│   ├── Cargo.toml          # Rust 依賴配置
│   └── tauri.conf.json     # Tauri 配置
├── index.html
├── package.json
└── README.md
```

## 💻 核心功能說明

### Rust 後端（src-tauri/src/main.rs）

提供以下 Tauri 命令：

```rust
#[tauri::command]
fn encrypt_file(file_path: String, password: String, output_path: String) -> Result<String, String>
```
- 使用密碼加密檔案
- 生成隨機鹽值和 nonce
- 使用 PBKDF2 派生加密金鑰
- 使用 AES-256-GCM 加密檔案內容

```rust
#[tauri::command]
fn decrypt_file(file_path: String, password: String, output_path: String) -> Result<String, String>
```
- 使用密碼解密檔案
- 從檔案讀取鹽值和 nonce
- 使用 PBKDF2 派生解密金鑰
- 使用 AES-256-GCM 解密檔案內容

```rust
#[tauri::command]
fn get_file_info(file_path: String) -> Result<FileInfo, String>
```
- 獲取檔案資訊（大小、類型、修改時間）

### React 前端（src/App.tsx）

- **檔案選擇**: 支援點擊選擇和拖放
- **操作模式**: 加密/解密模式切換
- **進度顯示**: 處理進度即時顯示
- **錯誤處理**: 友善的錯誤提示

## 🎨 介面預覽

```
┌────────────────────────────────────────────────────┐
│   🔐  文件加密工具                                    │
├────────────────────────────────────────────────────┤
│                                                    │
│   [加密] [解密]                                      │
│                                                    │
│   ┌──────────────────────────────────────────┐    │
│   │  拖放檔案到此處                            │    │
│   │  或點擊選擇檔案                            │    │
│   │                                          │    │
│   │         📄                               │    │
│   │                                          │    │
│   └──────────────────────────────────────────┘    │
│                                                    │
│   選擇的檔案: document.pdf (2.5 MB)                 │
│                                                    │
│   密碼: [**********]                               │
│                                                    │
│   [🔐 加密檔案]                                     │
│                                                    │
└────────────────────────────────────────────────────┘
```

## ⚙️ 配置選項

### PBKDF2 參數

可在 Rust 程式碼中修改：
- 迭代次數：預設 100,000 次（可增加以提高安全性）
- 鹽值長度：32 位元組
- 密鑰長度：32 位元組（256 位元）

### Tauri 配置

可在 `tauri.conf.json` 中修改：
- 視窗大小：預設 700x600
- 檔案系統權限範圍

## 📦 依賴說明

### Rust 依賴（Cargo.toml）
- `tauri`: Tauri 核心框架
- `serde`: JSON 序列化
- `ring`: 加密庫（AES-GCM、PBKDF2）
- `rand`: 隨機數生成
- `base64`: Base64 編碼（可選）

### 前端依賴（package.json）
- `react`: UI 框架
- `react-dom`: React DOM 渲染
- `@tauri-apps/api`: Tauri 前端 API
- `vite`: 開發伺服器和建置工具

## 🚧 未來改進方向

- [ ] 支援更多加密演算法（ChaCha20-Poly1305）
- [ ] 密碼強度檢測
- [ ] 檔案完整性驗證（額外的 HMAC）
- [ ] 批次加密資料夾
- [ ] 密鑰檔案支援（金鑰 + 密碼雙重保護）
- [ ] 壓縮後加密（減小檔案大小）
- [ ] 加密進度條（大檔案）
- [ ] 密碼管理器整合

## 🐛 已知問題

- 超大檔案（>1GB）可能需要較長處理時間
- 記憶體限制：建議單次處理檔案不超過 512MB

## ⚠️ 重要提示

1. **密碼遺失**: 如果忘記密碼，加密的檔案將無法解密！
2. **備份原檔**: 加密前請備份原始檔案
3. **測試先行**: 首次使用建議先用測試檔案試驗
4. **不可恢復**: 解密密碼錯誤將導致檔案損壞
5. **法律責任**: 請勿用於非法用途，使用者需自行承擔法律責任

## 📝 開發注意事項

1. **記憶體管理**: 大檔案處理時注意記憶體使用
2. **錯誤處理**: 完善的錯誤提示和恢復機制
3. **安全審計**: 加密程式碼需經過安全審計
4. **測試覆蓋**: 充分測試各種檔案類型和大小

## 📄 授權

MIT License

---

**開發時間**: 約 4-5 小時
**難度等級**: ⭐⭐⭐⭐ (中高)
**適合**: 對加密感興趣的開發者、需要檔案保護的使用者
