[pytest]
# Pytest 配置檔範例

# 測試發現模式
python_files = test_*.py *_test.py
python_classes = Test*
python_functions = test_*

# 測試路徑
testpaths =
    tests
    test

# 最小 Python 版本
minversion = 6.0

# 命令列選項
addopts =
    # 顯示詳細輸出
    -v
    # 顯示測試摘要
    -ra
    # 顯示本地變數
    --showlocals
    # 嚴格標記模式
    --strict-markers
    # 嚴格配置
    --strict-config
    # 顯示測試持續時間
    --durations=10

# 標記定義
markers =
    slow: 標記慢速測試（執行時間 > 1 秒）
    integration: 標記整合測試
    unit: 標記單元測試
    smoke: 標記冒煙測試
    regression: 標記回歸測試
    wip: 標記進行中的測試
    skip_ci: 在 CI 環境中跳過

# 忽略的警告
filterwarnings =
    ignore::DeprecationWarning
    ignore::PendingDeprecationWarning

# 覆蓋率選項
[coverage:run]
source = .
omit =
    */tests/*
    */test_*.py
    */__pycache__/*
    */site-packages/*
    */venv/*
    */.venv/*

[coverage:report]
# 最小覆蓋率
fail_under = 80

# 精度
precision = 2

# 顯示缺失的行
show_missing = True

# 跳過空白檔案
skip_empty = True

# 排除的行
exclude_lines =
    # 標準排除
    pragma: no cover

    # 防禦性程式碼
    def __repr__
    if self.debug:
    if settings.DEBUG

    # 未實作
    raise AssertionError
    raise NotImplementedError

    # 類型檢查
    if TYPE_CHECKING:
    if __name__ == .__main__.:

    # 抽象方法
    @abstractmethod
    @abc.abstractmethod

[coverage:html]
directory = htmlcov

[coverage:xml]
output = coverage.xml
