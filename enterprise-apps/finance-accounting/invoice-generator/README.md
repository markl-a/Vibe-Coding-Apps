# 發票生成器 (Invoice Generator)

專業的發票生成和管理系統，支援創建、管理和導出 PDF 發票。

## 功能特色

### 📝 發票管理
- **創建發票**：直觀的介面快速創建專業發票
- **客戶管理**：儲存和管理客戶資訊
- **產品管理**：維護產品目錄和價格
- **PDF 導出**：生成專業格式的 PDF 發票

### 💼 核心功能
- 自動計算稅額和總計
- 支援多幣別（TWD、USD、EUR、JPY、CNY）
- 靈活的付款條件設定
- 發票狀態追蹤（草稿、已發送、已付款、逾期）
- 完整的客戶和產品資料庫

### 📊 統計報表
- 營收趨勢分析
- 發票狀態分布
- 月度營收統計
- 客戶和產品統計

## 安裝

```bash
# 安裝依賴
pip install -r requirements.txt
```

## 使用方法

```bash
# 啟動應用
streamlit run app.py
```

## 使用流程

### 1. 創建發票

1. 選擇或新增客戶資訊
2. 填寫發票基本資訊（日期、付款條件等）
3. 添加發票項目（產品/服務）
4. 系統自動計算稅額和總計
5. 保存或生成 PDF

### 2. 客戶管理

- 新增客戶：輸入客戶名稱、郵箱、地址、統編等
- 查看客戶列表：瀏覽所有客戶資訊
- 快速選擇：創建發票時快速選擇現有客戶

### 3. 產品管理

- 新增產品：輸入產品名稱、描述、價格等
- 產品目錄：維護產品列表
- 快速添加：創建發票時快速選擇產品

### 4. 查看和管理發票

- 篩選：按狀態、客戶篩選發票
- 排序：按日期或金額排序
- 統計：查看總數、總額等統計資訊

## 資料結構

### 發票結構
```json
{
  "invoice_number": "INV-20231116001",
  "customer": {
    "name": "客戶名稱",
    "email": "customer@example.com",
    "address": "客戶地址",
    "tax_id": "12345678"
  },
  "invoice_date": "2023-11-16",
  "due_date": "2023-12-16",
  "payment_terms": "Net 30",
  "currency": "TWD",
  "items": [
    {
      "description": "產品或服務描述",
      "quantity": 1,
      "unit_price": 1000,
      "tax_rate": 5
    }
  ],
  "notes": "備註資訊",
  "status": "draft"
}
```

## 發票狀態

- **draft**：草稿狀態
- **sent**：已發送給客戶
- **paid**：客戶已付款
- **overdue**：逾期未付款

## PDF 格式

生成的 PDF 發票包含：
- 發票號碼和日期
- 客戶資訊
- 項目明細表
- 稅額計算
- 總計金額
- 備註資訊

## 技術架構

- **前端**：Streamlit（互動式 Web UI）
- **PDF 生成**：ReportLab（專業 PDF 生成）
- **資料儲存**：JSON 文件（輕量級資料庫）
- **數據處理**：Pandas（數據分析和展示）

## 文件結構

```
invoice-generator/
├── app.py                    # Streamlit 主應用
├── invoice_generator.py      # 發票生成核心邏輯
├── database/
│   ├── db_handler.py        # 資料庫處理
│   ├── invoices.json        # 發票資料
│   ├── customers.json       # 客戶資料
│   └── products.json        # 產品資料
├── generated_invoices/       # 生成的 PDF 文件
├── requirements.txt
└── README.md
```

## 使用案例

### 案例 1：自由職業者開發票
```
1. 新增客戶（如果是新客戶）
2. 創建發票，選擇客戶
3. 添加服務項目（如：網站開發、每小時 $50、工作 20 小時）
4. 設定付款條件為 Net 30
5. 生成 PDF 並下載
6. 透過 email 發送給客戶
```

### 案例 2：小型企業產品銷售
```
1. 在產品管理中先建立產品目錄
2. 創建發票時快速選擇產品
3. 輸入數量，系統自動計算金額
4. 添加稅率（如：5% 營業稅）
5. 保存並追蹤發票狀態
```

## 擴展功能建議

### 未來可以添加的功能
- [ ] Email 自動發送功能
- [ ] 發票模板自訂
- [ ] 多語言支援
- [ ] 雲端資料庫整合（PostgreSQL、MySQL）
- [ ] 付款追蹤和提醒
- [ ] 信用額度管理
- [ ] 發票自動編號規則
- [ ] Excel 匯出
- [ ] 發票預覽功能
- [ ] 自動生成定期發票

## 注意事項

1. **資料備份**：定期備份 `database/` 目錄下的 JSON 文件
2. **發票號碼**：確保發票號碼唯一性
3. **稅率設定**：根據當地稅法設定正確的稅率
4. **PDF 儲存**：生成的 PDF 儲存在 `generated_invoices/` 目錄

## 常見問題

**Q: 如何修改公司資訊？**
A: 可以在 `invoice_generator.py` 中的 PDF 生成函數添加公司資訊。

**Q: 支援哪些幣別？**
A: 目前支援 TWD、USD、EUR、JPY、CNY，可以在程式中輕鬆添加更多。

**Q: 資料儲存在哪裡？**
A: 資料以 JSON 格式儲存在 `database/` 目錄下。

**Q: 可以匯出為其他格式嗎？**
A: 目前支援 PDF，可以擴展支援 Excel、HTML 等格式。

## 授權

MIT License

---

**快速開始創建專業發票！** 🚀
