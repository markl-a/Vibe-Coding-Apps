# æ™ºèƒ½éœ€æ±‚é æ¸¬ç³»çµ±
ğŸ¤– **AI-Driven | AI-Native** ğŸš€

åŸºæ–¼ Prophet æ™‚é–“åºåˆ—é æ¸¬æ¨¡å‹çš„æ™ºèƒ½éœ€æ±‚é æ¸¬ç³»çµ±ï¼Œå¹«åŠ©ä¼æ¥­å„ªåŒ–åº«å­˜ç®¡ç†å’Œæ¡è³¼æ±ºç­–ã€‚

## ğŸ“‹ ç›®éŒ„

- [åŠŸèƒ½ç‰¹æ€§](#åŠŸèƒ½ç‰¹æ€§)
- [æŠ€è¡“æ¶æ§‹](#æŠ€è¡“æ¶æ§‹)
- [å¿«é€Ÿé–‹å§‹](#å¿«é€Ÿé–‹å§‹)
- [API æ–‡æª”](#api-æ–‡æª”)
- [ä½¿ç”¨ç¤ºä¾‹](#ä½¿ç”¨ç¤ºä¾‹)
- [éƒ¨ç½²æŒ‡å—](#éƒ¨ç½²æŒ‡å—)

---

## âœ¨ åŠŸèƒ½ç‰¹æ€§

### æ ¸å¿ƒåŠŸèƒ½

- **æ™‚é–“åºåˆ—é æ¸¬**ï¼šä½¿ç”¨ Facebook Prophet é€²è¡Œéœ€æ±‚é æ¸¬
- **å¤šé€±æœŸé æ¸¬**ï¼šæ”¯æŒæ—¥ã€é€±ã€æœˆå¤šç¨®æ™‚é–“ç²’åº¦
- **è¶¨å‹¢åˆ†æ**ï¼šè‡ªå‹•è­˜åˆ¥éœ€æ±‚è¶¨å‹¢å’Œå­£ç¯€æ€§æ¨¡å¼
- **ç•°å¸¸æª¢æ¸¬**ï¼šä½¿ç”¨ Isolation Forest æª¢æ¸¬éœ€æ±‚ç•°å¸¸
- **ç½®ä¿¡å€é–“**ï¼šæä¾›é æ¸¬çš„ä¸Šä¸‹ç•Œï¼Œé‡åŒ–ä¸ç¢ºå®šæ€§
- **æº–ç¢ºåº¦è©•ä¼°**ï¼šMAPEã€RMSEã€MAEã€RÂ² ç­‰å¤šç¨®æŒ‡æ¨™

### AI èƒ½åŠ›

- **è‡ªå‹•å­£ç¯€æ€§æª¢æ¸¬**ï¼šè‡ªå‹•è­˜åˆ¥å¹´åº¦ã€é€±åº¦å­£ç¯€æ€§æ¨¡å¼
- **ä¿ƒéŠ·å½±éŸ¿åˆ†æ**ï¼šè€ƒæ…®ä¿ƒéŠ·æ´»å‹•å°éœ€æ±‚çš„å½±éŸ¿
- **è¶¨å‹¢è®ŠåŒ–é»æª¢æ¸¬**ï¼šè‡ªå‹•è­˜åˆ¥éœ€æ±‚æ¨¡å¼çš„çªè®Š
- **å¤šè®Šé‡é æ¸¬**ï¼šæ”¯æŒåƒ¹æ ¼ã€ä¿ƒéŠ·ç­‰å¤–éƒ¨å› ç´ 

---

## ğŸ—ï¸ æŠ€è¡“æ¶æ§‹

### å¾Œç«¯æŠ€è¡“æ£§

- **æ¡†æ¶**: FastAPI 0.104+
- **AI/ML**: Prophet 1.1+, Scikit-learn 1.3+
- **æ•¸æ“šè™•ç†**: Pandas 2.1+, NumPy 1.26+
- **è³‡æ–™åº«**: SQLite / PostgreSQL
- **ORM**: SQLAlchemy 2.0+

### å‰ç«¯æŠ€è¡“æ£§

- **æ¡†æ¶**: React 18+
- **UI çµ„ä»¶**: Ant Design 5+
- **åœ–è¡¨**: Recharts 2+
- **HTTP å®¢æˆ¶ç«¯**: Axios 1.6+
- **æ—¥æœŸè™•ç†**: Day.js 1.11+

### æ¶æ§‹åœ–

```
å‰ç«¯ (React + Ant Design)
        â†“
   RESTful API
        â†“
FastAPI å¾Œç«¯æœå‹™
        â†“
Prophet ML æ¨¡å‹
        â†“
   SQLite è³‡æ–™åº«
```

---

## ğŸš€ å¿«é€Ÿé–‹å§‹

### ç’°å¢ƒè¦æ±‚

- Python 3.8+
- Node.js 16+
- pip / npm

### å¾Œç«¯å•Ÿå‹•

```bash
# é€²å…¥å¾Œç«¯ç›®éŒ„
cd backend

# å®‰è£ä¾è³´
pip install -r requirements.txt

# å•Ÿå‹•æœå‹™
python main.py
```

å¾Œç«¯æœå‹™å°‡é‹è¡Œåœ¨ `http://localhost:8000`

### å‰ç«¯å•Ÿå‹•

```bash
# é€²å…¥å‰ç«¯ç›®éŒ„
cd frontend

# å®‰è£ä¾è³´
npm install

# å•Ÿå‹•é–‹ç™¼æœå‹™å™¨
npm start
```

å‰ç«¯æ‡‰ç”¨å°‡é‹è¡Œåœ¨ `http://localhost:3000`

### ç”Ÿæˆæ¸¬è©¦æ•¸æ“š

```bash
# ç¢ºä¿å¾Œç«¯æœå‹™å·²å•Ÿå‹•
cd backend
python data_generator.py
```

é€™å°‡ç”Ÿæˆ 3 å€‹ç‰©æ–™çš„ 24 å€‹æœˆæ­·å²æ•¸æ“šä¸¦è‡ªå‹•ä¸Šå‚³åˆ°ç³»çµ±ã€‚

---

## ğŸ“š API æ–‡æª”

### å¥åº·æª¢æŸ¥

```http
GET /health
```

### ç²å–ç‰©æ–™åˆ—è¡¨

```http
GET /api/items
```

**éŸ¿æ‡‰ç¤ºä¾‹**:
```json
{
  "count": 3,
  "items": [
    {
      "item_id": "ITEM-001",
      "item_name": "ç­†è¨˜å‹é›»è…¦"
    }
  ]
}
```

### ç²å–æ­·å²éœ€æ±‚

```http
GET /api/demand-history/{item_id}?limit=100
```

**éŸ¿æ‡‰ç¤ºä¾‹**:
```json
{
  "item_id": "ITEM-001",
  "count": 24,
  "records": [
    {
      "date": "2024-01-01T00:00:00",
      "quantity": 1250.5,
      "is_promotion": 0,
      "price": 100.0
    }
  ]
}
```

### å‰µå»ºæ­·å²éœ€æ±‚è¨˜éŒ„

```http
POST /api/demand-history/
Content-Type: application/json

{
  "item_id": "ITEM-001",
  "item_name": "ç­†è¨˜å‹é›»è…¦",
  "date": "2024-01-01T00:00:00",
  "quantity": 1000,
  "is_promotion": 0,
  "price": 100.0
}
```

### æ‰¹é‡å‰µå»ºè¨˜éŒ„

```http
POST /api/demand-history/batch
Content-Type: application/json

{
  "records": [
    {
      "item_id": "ITEM-001",
      "item_name": "ç­†è¨˜å‹é›»è…¦",
      "date": "2024-01-01T00:00:00",
      "quantity": 1000,
      "is_promotion": 0,
      "price": 100.0
    }
  ]
}
```

### ç”Ÿæˆéœ€æ±‚é æ¸¬

```http
POST /api/forecast/
Content-Type: application/json

{
  "item_id": "ITEM-001",
  "periods": 12,
  "frequency": "M",
  "include_promotions": false
}
```

**åƒæ•¸èªªæ˜**:
- `item_id`: ç‰©æ–™ç·¨è™Ÿ
- `periods`: é æ¸¬é€±æœŸæ•¸é‡ï¼ˆé»˜èª 12ï¼‰
- `frequency`: æ™‚é–“é »ç‡ - "D"(æ—¥), "W"(é€±), "M"(æœˆ)
- `include_promotions`: æ˜¯å¦è€ƒæ…®ä¿ƒéŠ·å½±éŸ¿

**éŸ¿æ‡‰ç¤ºä¾‹**:
```json
{
  "item_id": "ITEM-001",
  "forecasts": [
    {
      "date": "2025-01-01T00:00:00",
      "predicted_quantity": 1350.25,
      "lower_bound": 1200.50,
      "upper_bound": 1500.00,
      "trend": 1340.00
    }
  ],
  "accuracy_metrics": {
    "mape": 8.5,
    "rmse": 125.3,
    "mae": 98.7,
    "r2_score": 0.92
  },
  "model_info": {
    "model_type": "Prophet",
    "training_samples": 24,
    "forecast_periods": 12,
    "frequency": "M"
  }
}
```

### æª¢æ¸¬éœ€æ±‚ç•°å¸¸

```http
GET /api/anomalies/{item_id}?contamination=0.1
```

**éŸ¿æ‡‰ç¤ºä¾‹**:
```json
{
  "item_id": "ITEM-001",
  "total_records": 24,
  "anomaly_count": 2,
  "anomalies": [
    {
      "date": "2024-06-01T00:00:00",
      "quantity": 2500.0
    }
  ]
}
```

---

## ğŸ’¡ ä½¿ç”¨ç¤ºä¾‹

### Python å®¢æˆ¶ç«¯ç¤ºä¾‹

```python
import requests
from datetime import datetime

API_URL = "http://localhost:8000"

# 1. å‰µå»ºæ­·å²éœ€æ±‚æ•¸æ“š
response = requests.post(
    f"{API_URL}/api/demand-history/",
    json={
        "item_id": "ITEM-001",
        "item_name": "ç­†è¨˜å‹é›»è…¦",
        "date": datetime.now().isoformat(),
        "quantity": 1000,
        "is_promotion": 0,
        "price": 100.0
    }
)
print(response.json())

# 2. ç”Ÿæˆé æ¸¬
response = requests.post(
    f"{API_URL}/api/forecast/",
    json={
        "item_id": "ITEM-001",
        "periods": 12,
        "frequency": "M",
        "include_promotions": False
    }
)
forecast_result = response.json()

# 3. æ‰“å°é æ¸¬çµæœ
print(f"æº–ç¢ºåº¦æŒ‡æ¨™: {forecast_result['accuracy_metrics']}")
for fc in forecast_result['forecasts'][:3]:
    print(f"{fc['date']}: {fc['predicted_quantity']:.0f} "
          f"(å€é–“: {fc['lower_bound']:.0f} - {fc['upper_bound']:.0f})")
```

### JavaScript å®¢æˆ¶ç«¯ç¤ºä¾‹

```javascript
const API_URL = 'http://localhost:8000';

// ç”Ÿæˆé æ¸¬
async function generateForecast(itemId) {
  const response = await fetch(`${API_URL}/api/forecast/`, {
    method: 'POST',
    headers: {
      'Content-Type': 'application/json',
    },
    body: JSON.stringify({
      item_id: itemId,
      periods: 12,
      frequency: 'M',
      include_promotions: false,
    }),
  });

  const result = await response.json();
  console.log('é æ¸¬çµæœ:', result);
  return result;
}

// ä½¿ç”¨
generateForecast('ITEM-001');
```

---

## ğŸ“Š é æ¸¬æ¨¡å‹èªªæ˜

### Prophet æ¨¡å‹

æœ¬ç³»çµ±ä½¿ç”¨ Facebook é–‹ç™¼çš„ Prophet æ¨¡å‹ï¼Œç‰¹é»åŒ…æ‹¬:

1. **è‡ªå‹•å­£ç¯€æ€§è™•ç†**: è‡ªå‹•æª¢æ¸¬å¹´åº¦ã€é€±åº¦ã€æ—¥åº¦å­£ç¯€æ€§
2. **ç¯€å‡æ—¥æ•ˆæ‡‰**: å¯é…ç½®ç¯€å‡æ—¥å°éœ€æ±‚çš„å½±éŸ¿
3. **è¶¨å‹¢è®ŠåŒ–é»**: è‡ªå‹•è­˜åˆ¥è¶¨å‹¢çš„çªè®Šé»
4. **é­¯æ£’æ€§**: å°ç¼ºå¤±æ•¸æ“šå’Œç•°å¸¸å€¼æœ‰è‰¯å¥½çš„å®¹éŒ¯æ€§

### æ¨¡å‹åƒæ•¸

```python
Prophet(
    yearly_seasonality=True,      # å¹´åº¦å­£ç¯€æ€§
    weekly_seasonality=True,      # é€±åº¦å­£ç¯€æ€§
    daily_seasonality=False,      # æ—¥åº¦å­£ç¯€æ€§
    seasonality_mode='multiplicative',  # å­£ç¯€æ€§æ¨¡å¼
    changepoint_prior_scale=0.05  # è¶¨å‹¢éˆæ´»åº¦
)
```

### æº–ç¢ºåº¦æŒ‡æ¨™

- **MAPE** (Mean Absolute Percentage Error): å¹³å‡çµ•å°ç™¾åˆ†æ¯”èª¤å·®ï¼Œè¶Šå°è¶Šå¥½
- **RMSE** (Root Mean Square Error): å‡æ–¹æ ¹èª¤å·®ï¼Œå°å¤§èª¤å·®æ•æ„Ÿ
- **MAE** (Mean Absolute Error): å¹³å‡çµ•å°èª¤å·®
- **RÂ² Score**: æ±ºå®šä¿‚æ•¸ï¼Œæ¥è¿‘ 1 è¡¨ç¤ºæ¨¡å‹æ“¬åˆåº¦å¥½

---

## ğŸ³ éƒ¨ç½²æŒ‡å—

### Docker éƒ¨ç½²

å‰µå»º `Dockerfile`:

```dockerfile
# å¾Œç«¯ Dockerfile
FROM python:3.10-slim

WORKDIR /app

COPY requirements.txt .
RUN pip install --no-cache-dir -r requirements.txt

COPY . .

EXPOSE 8000

CMD ["python", "main.py"]
```

å‰µå»º `docker-compose.yml`:

```yaml
version: '3.8'

services:
  backend:
    build: ./backend
    ports:
      - "8000:8000"
    environment:
      - DATABASE_URL=sqlite:///./demand_forecasting.db
    volumes:
      - ./data:/app/data

  frontend:
    build: ./frontend
    ports:
      - "3000:3000"
    depends_on:
      - backend
    environment:
      - REACT_APP_API_URL=http://localhost:8000
```

å•Ÿå‹•:

```bash
docker-compose up -d
```

### ç”Ÿç”¢ç’°å¢ƒé…ç½®

#### ä½¿ç”¨ PostgreSQL

```python
# ä¿®æ”¹ main.py ä¸­çš„è³‡æ–™åº« URL
SQLALCHEMY_DATABASE_URL = "postgresql://user:password@localhost/demand_forecasting"
```

#### ä½¿ç”¨ Nginx åå‘ä»£ç†

```nginx
server {
    listen 80;
    server_name your-domain.com;

    location /api {
        proxy_pass http://localhost:8000;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
    }

    location / {
        proxy_pass http://localhost:3000;
    }
}
```

---

## ğŸ”§ é…ç½®é¸é …

### ç’°å¢ƒè®Šæ•¸

**å¾Œç«¯**:
- `DATABASE_URL`: è³‡æ–™åº«é€£æ¥å­—ç¬¦ä¸²
- `API_HOST`: API æœå‹™ä¸»æ©Ÿï¼ˆé»˜èª: 0.0.0.0ï¼‰
- `API_PORT`: API æœå‹™ç«¯å£ï¼ˆé»˜èª: 8000ï¼‰

**å‰ç«¯**:
- `REACT_APP_API_URL`: å¾Œç«¯ API åœ°å€ï¼ˆé»˜èª: http://localhost:8000ï¼‰

---

## ğŸ“ˆ æ€§èƒ½å„ªåŒ–

### æ¨¡å‹å„ªåŒ–

1. **è¨“ç·´æ•¸æ“šé‡**: å»ºè­°è‡³å°‘ 2 å¹´çš„æ­·å²æ•¸æ“š
2. **æ•¸æ“šé »ç‡**: æ ¹æ“šæ¥­å‹™éœ€æ±‚é¸æ“‡åˆé©çš„æ™‚é–“ç²’åº¦
3. **ç•°å¸¸å€¼è™•ç†**: ä½¿ç”¨ç•°å¸¸æª¢æ¸¬éæ¿¾æ¥µç«¯å€¼

### ç³»çµ±å„ªåŒ–

1. **è³‡æ–™åº«ç´¢å¼•**: ç‚ºå¸¸ç”¨æŸ¥è©¢å­—æ®µå‰µå»ºç´¢å¼•
2. **ç·©å­˜ç­–ç•¥**: ä½¿ç”¨ Redis ç·©å­˜é æ¸¬çµæœ
3. **ç•°æ­¥è™•ç†**: å°å¤§æ‰¹é‡é æ¸¬ä½¿ç”¨ç•°æ­¥ä»»å‹™éšŠåˆ—

---

## ğŸ¤ è²¢ç»æŒ‡å—

æ­¡è¿æäº¤ Issue å’Œ Pull Requestï¼

### é–‹ç™¼æµç¨‹

1. Fork å°ˆæ¡ˆ
2. å‰µå»ºç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤è®Šæ›´ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. é–‹å•Ÿ Pull Request

---

## ğŸ“ è¨±å¯è­‰

MIT License

---

## ğŸ“ è¯ç¹«æ–¹å¼

å¦‚æœ‰å•é¡Œæˆ–å»ºè­°ï¼Œè«‹æäº¤ Issue æˆ–è¯ç¹«é–‹ç™¼åœ˜éšŠã€‚

---

**ğŸš€ é–‹å§‹ä½¿ç”¨ AI å„ªåŒ–ä½ çš„éœ€æ±‚é æ¸¬å§ï¼**
