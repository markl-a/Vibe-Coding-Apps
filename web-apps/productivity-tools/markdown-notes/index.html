<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Markdown 筆記 | Markdown Notes</title>
    <link rel="stylesheet" href="styles.css">
    <!-- Marked.js for Markdown parsing -->
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <!-- Highlight.js for code syntax highlighting -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github-dark.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
</head>
<body>
    <div class="app-container">
        <!-- 側邊欄 -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <h1>📝 我的筆記</h1>
                <button class="btn btn-primary btn-sm" id="newNoteBtn">
                    ➕ 新增筆記
                </button>
            </div>

            <div class="sidebar-search">
                <input
                    type="text"
                    id="searchInput"
                    class="search-input"
                    placeholder="🔍 搜尋筆記..."
                >
            </div>

            <div class="sidebar-filters">
                <button class="filter-btn active" data-filter="all">
                    📚 所有筆記 <span class="count" id="countAll">0</span>
                </button>
                <button class="filter-btn" data-filter="favorites">
                    ⭐ 我的最愛 <span class="count" id="countFavorites">0</span>
                </button>
                <button class="filter-btn" data-filter="recent">
                    🕒 最近編輯 <span class="count" id="countRecent">0</span>
                </button>
            </div>

            <div class="sidebar-tags">
                <h3>🏷️ 標籤</h3>
                <div id="tagsList" class="tags-list">
                    <!-- 標籤將動態添加 -->
                </div>
            </div>

            <div class="notes-list" id="notesList">
                <!-- 筆記列表將動態添加 -->
            </div>

            <div class="sidebar-footer">
                <button class="btn btn-outline btn-sm" id="exportBtn">
                    💾 匯出
                </button>
                <button class="btn btn-outline btn-sm" id="importBtn">
                    📥 匯入
                </button>
                <input type="file" id="importFile" accept=".json" style="display: none;">
            </div>
        </aside>

        <!-- 主編輯區 -->
        <main class="main-content">
            <!-- 空狀態 -->
            <div id="emptyState" class="empty-state">
                <div class="empty-icon">📝</div>
                <h2>歡迎使用 Markdown 筆記</h2>
                <p>選擇一個筆記或創建新筆記開始編輯</p>
                <button class="btn btn-primary" onclick="createNewNote()">
                    ➕ 創建第一個筆記
                </button>
            </div>

            <!-- 編輯器 -->
            <div id="editorContainer" class="editor-container" style="display: none;">
                <div class="editor-header">
                    <input
                        type="text"
                        id="noteTitle"
                        class="note-title-input"
                        placeholder="筆記標題..."
                    >
                    <div class="editor-actions">
                        <button class="icon-btn" id="favoriteBtn" title="加入最愛">
                            ⭐
                        </button>
                        <button class="icon-btn" id="deleteNoteBtn" title="刪除筆記">
                            🗑️
                        </button>
                        <div class="view-toggle">
                            <button class="toggle-btn active" data-view="edit">✏️ 編輯</button>
                            <button class="toggle-btn" data-view="split">⚡ 分割</button>
                            <button class="toggle-btn" data-view="preview">👁️ 預覽</button>
                        </div>
                    </div>
                </div>

                <div class="editor-toolbar">
                    <button class="toolbar-btn" data-action="bold" title="粗體 (Ctrl+B)">
                        <strong>B</strong>
                    </button>
                    <button class="toolbar-btn" data-action="italic" title="斜體 (Ctrl+I)">
                        <em>I</em>
                    </button>
                    <button class="toolbar-btn" data-action="strikethrough" title="刪除線">
                        <s>S</s>
                    </button>
                    <span class="toolbar-divider"></span>
                    <button class="toolbar-btn" data-action="heading" title="標題">
                        H
                    </button>
                    <button class="toolbar-btn" data-action="quote" title="引用">
                        "
                    </button>
                    <button class="toolbar-btn" data-action="code" title="程式碼">
                        &lt;/&gt;
                    </button>
                    <span class="toolbar-divider"></span>
                    <button class="toolbar-btn" data-action="link" title="連結 (Ctrl+K)">
                        🔗
                    </button>
                    <button class="toolbar-btn" data-action="image" title="圖片">
                        🖼️
                    </button>
                    <span class="toolbar-divider"></span>
                    <button class="toolbar-btn" data-action="ul" title="無序列表">
                        ≡
                    </button>
                    <button class="toolbar-btn" data-action="ol" title="有序列表">
                        ≣
                    </button>
                    <button class="toolbar-btn" data-action="task" title="待辦清單">
                        ☐
                    </button>
                    <span class="toolbar-divider"></span>
                    <button class="toolbar-btn" data-action="table" title="表格">
                        ⊞
                    </button>
                </div>

                <div class="editor-tags">
                    <input
                        type="text"
                        id="tagInput"
                        class="tag-input"
                        placeholder="添加標籤... (按 Enter)"
                    >
                    <div id="noteTags" class="note-tags">
                        <!-- 標籤將動態添加 -->
                    </div>
                </div>

                <div class="editor-wrapper">
                    <div id="editorPane" class="editor-pane">
                        <textarea
                            id="markdownEditor"
                            class="markdown-textarea"
                            placeholder="開始編寫你的 Markdown 筆記..."
                        ></textarea>
                    </div>
                    <div id="previewPane" class="preview-pane">
                        <div id="markdownPreview" class="markdown-preview"></div>
                    </div>
                </div>

                <div class="editor-footer">
                    <div class="editor-stats">
                        <span id="charCount">0 字元</span>
                        <span>|</span>
                        <span id="wordCount">0 字</span>
                        <span>|</span>
                        <span id="lineCount">0 行</span>
                    </div>
                    <div class="last-saved">
                        <span id="lastSaved">未儲存</span>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <script src="script.js"></script>
</body>
</html>
