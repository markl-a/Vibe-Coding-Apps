# ğŸ’° DeFi Projects - å»ä¸­å¿ƒåŒ–é‡‘è

å»ä¸­å¿ƒåŒ–é‡‘èï¼ˆDeFiï¼‰æ‡‰ç”¨å°ˆæ¡ˆé›†åˆï¼Œå±•ç¤ºå¦‚ä½•ä½¿ç”¨ AI è¼”åŠ©å·¥å…·æ§‹å»ºå„ç¨® DeFi å”è­°å’Œæ‡‰ç”¨ã€‚

## ğŸ“š å°ˆæ¡ˆåˆ—è¡¨

### 1. ğŸ”„ [DEX Swap](./dex-swap/) - å»ä¸­å¿ƒåŒ–äº¤æ˜“æ‰€
è‡ªå‹•åŒ–åšå¸‚å•†ï¼ˆAMMï¼‰å»ä¸­å¿ƒåŒ–äº¤æ˜“æ‰€ï¼Œé¡ä¼¼ Uniswapã€‚

**ç‰¹æ€§**ï¼š
- âœ… è‡ªå‹•åŒ–åšå¸‚å•†ï¼ˆAMMï¼‰æ©Ÿåˆ¶
- âœ… æµå‹•æ€§æ± ç®¡ç†
- âœ… ä»£å¹£äº¤æ›åŠŸèƒ½
- âœ… æ»‘é»ä¿è­·
- âœ… æµå‹•æ€§æä¾›è€…çå‹µ

**æŠ€è¡“æ£§**ï¼š
- Solidity + Hardhat
- React + Next.js
- ethers.js + wagmi
- TailwindCSS

### 2. ğŸ¦ [Lending Protocol](./lending-protocol/) - å€Ÿè²¸å”è­°å¹³å°
å»ä¸­å¿ƒåŒ–å€Ÿè²¸å”è­°ï¼Œé¡ä¼¼ Aave æˆ– Compoundã€‚

**ç‰¹æ€§**ï¼š
- âœ… è¶…é¡æŠµæŠ¼å€Ÿè²¸
- âœ… åˆ©ç‡æ¨¡å‹ï¼ˆç©©å®š/æµ®å‹•ï¼‰
- âœ… æ¸…ç®—æ©Ÿåˆ¶
- âœ… æ²»ç†ä»£å¹£
- âœ… é¢¨éšªåƒæ•¸ç®¡ç†

**æŠ€è¡“æ£§**ï¼š
- Solidity + Foundry
- React + TypeScript
- The Graphï¼ˆæ•¸æ“šç´¢å¼•ï¼‰
- Chainlinkï¼ˆåƒ¹æ ¼é è¨€æ©Ÿï¼‰

### 3. ğŸŒ¾ [Yield Farming](./yield-farming/) - æµå‹•æ€§æŒ–ç¤¦
æµå‹•æ€§æŒ–ç¤¦å’Œæ”¶ç›Šèšåˆå™¨å¹³å°ã€‚

**ç‰¹æ€§**ï¼š
- âœ… å¤šæ± è³ªæŠ¼
- âœ… çå‹µåˆ†é…æ©Ÿåˆ¶
- âœ… è‡ªå‹•è¤‡åˆ©
- âœ… æ”¶ç›Šèšåˆç­–ç•¥
- âœ… NFT åŠ æˆæ©Ÿåˆ¶

**æŠ€è¡“æ£§**ï¼š
- Solidity + Hardhat
- Vue.js + Vite
- ethers.js
- Web3Modal

## ğŸ¯ DeFi æ ¸å¿ƒæ¦‚å¿µ

### è‡ªå‹•åŒ–åšå¸‚å•†ï¼ˆAMMï¼‰
ä½¿ç”¨æ•¸å­¸å…¬å¼ï¼ˆå¦‚ x*y=kï¼‰ä¾†ç¢ºå®šè³‡ç”¢åƒ¹æ ¼ï¼Œç„¡éœ€è¨‚å–®ç°¿ã€‚

### æµå‹•æ€§æŒ–ç¤¦
ç”¨æˆ¶æä¾›æµå‹•æ€§ç²å¾—çå‹µä»£å¹£çš„æ©Ÿåˆ¶ã€‚

### è¶…é¡æŠµæŠ¼
å€Ÿæ¬¾äººå¿…é ˆæä¾›åƒ¹å€¼é«˜æ–¼å€Ÿæ¬¾é¡åº¦çš„æŠµæŠ¼å“ã€‚

### é–ƒé›»è²¸
åœ¨å–®ä¸€äº¤æ˜“å…§å®Œæˆå€Ÿæ¬¾å’Œé‚„æ¬¾çš„ç„¡æŠµæŠ¼è²¸æ¬¾ã€‚

## ğŸ› ï¸ é–‹ç™¼å·¥å…·

### æ™ºèƒ½åˆç´„é–‹ç™¼
```bash
# ä½¿ç”¨ Hardhat
npx hardhat init

# ä½¿ç”¨ Foundry
forge init my-defi-project
```

### æ¸¬è©¦æ¡†æ¶
```bash
# Hardhat æ¸¬è©¦
npx hardhat test

# Foundry æ¸¬è©¦ï¼ˆæ›´å¿«ï¼‰
forge test -vvv
```

### éƒ¨ç½²è…³æœ¬
```bash
# éƒ¨ç½²åˆ°æ¸¬è©¦ç¶²
npx hardhat run scripts/deploy.js --network sepolia

# ä½¿ç”¨ Foundry éƒ¨ç½²
forge create --rpc-url $RPC_URL --private-key $PRIVATE_KEY src/Contract.sol:Contract
```

## ğŸ“Š å¸¸ç”¨ DeFi å”è­°æ¥å£

### ERC20 ä»£å¹£æ¨™æº–
```solidity
interface IERC20 {
    function totalSupply() external view returns (uint256);
    function balanceOf(address account) external view returns (uint256);
    function transfer(address to, uint256 amount) external returns (bool);
    function approve(address spender, uint256 amount) external returns (bool);
    function transferFrom(address from, address to, uint256 amount) external returns (bool);
}
```

### Uniswap V2 è·¯ç”±å™¨
```solidity
interface IUniswapV2Router {
    function swapExactTokensForTokens(
        uint amountIn,
        uint amountOutMin,
        address[] calldata path,
        address to,
        uint deadline
    ) external returns (uint[] memory amounts);
}
```

## ğŸ” å®‰å…¨æœ€ä½³å¯¦è¸

### æ™ºèƒ½åˆç´„å®‰å…¨
1. âœ… **é‡å…¥æ”»æ“Šé˜²è­·** - ä½¿ç”¨ ReentrancyGuard
2. âœ… **æ•´æ•¸æº¢å‡ºé˜²è­·** - Solidity 0.8+ å…§å»º
3. âœ… **è¨ªå•æ§åˆ¶** - ä½¿ç”¨ Ownable æˆ– AccessControl
4. âœ… **æš«åœæ©Ÿåˆ¶** - ç·Šæ€¥æƒ…æ³ä¸‹æš«åœåˆç´„
5. âœ… **æ™‚é–“é–** - é‡è¦æ“ä½œéœ€è¦å»¶é²åŸ·è¡Œ

### å¸¸è¦‹æ¼æ´

#### é‡å…¥æ”»æ“Šç¤ºä¾‹
```solidity
// âŒ ä¸å®‰å…¨çš„å¯«æ³•
function withdraw(uint amount) public {
    require(balances[msg.sender] >= amount);
    msg.sender.call{value: amount}(""); // é‡å…¥é¢¨éšªï¼
    balances[msg.sender] -= amount;
}

// âœ… å®‰å…¨çš„å¯«æ³•
function withdraw(uint amount) public nonReentrant {
    require(balances[msg.sender] >= amount);
    balances[msg.sender] -= amount; // å…ˆæ›´æ–°ç‹€æ…‹
    msg.sender.call{value: amount}("");
}
```

#### åƒ¹æ ¼æ“ç¸±
```solidity
// âŒ ä¸å®‰å…¨ - ä½¿ç”¨å³æ™‚åƒ¹æ ¼
uint price = token0.balanceOf(pair) / token1.balanceOf(pair);

// âœ… å®‰å…¨ - ä½¿ç”¨æ™‚é–“åŠ æ¬Šå¹³å‡åƒ¹æ ¼ï¼ˆTWAPï¼‰
uint price = oracle.consult(token, amountIn);
```

## ğŸ“ˆ Gas å„ªåŒ–æŠ€å·§

### 1. ä½¿ç”¨ `calldata` è€Œé `memory`
```solidity
// âŒ è¼ƒè²´
function process(uint[] memory data) external {
    // ...
}

// âœ… è¼ƒä¾¿å®œ
function process(uint[] calldata data) external {
    // ...
}
```

### 2. æ‰“åŒ…è®Šé‡
```solidity
// âŒ ä½”ç”¨æ›´å¤šå­˜å„²æ§½
uint256 a;
uint128 b;
uint128 c;

// âœ… æ‰“åŒ…åˆ°ä¸€å€‹æ§½
uint128 b;
uint128 c;
uint256 a;
```

### 3. ä½¿ç”¨äº‹ä»¶è€Œéå­˜å„²
```solidity
// âœ… Gas æ•ˆç‡é«˜
event DataStored(uint256 indexed id, bytes data);
emit DataStored(id, data);
```

## ğŸ§ª æ¸¬è©¦ç­–ç•¥

### å–®å…ƒæ¸¬è©¦
```javascript
describe("DEX", function () {
  it("Should swap tokens correctly", async function () {
    const [owner] = await ethers.getSigners();
    const dex = await DEX.deploy();

    await tokenA.approve(dex.address, ethers.utils.parseEther("100"));
    await dex.swap(tokenA.address, tokenB.address, ethers.utils.parseEther("10"));

    expect(await tokenB.balanceOf(owner.address)).to.be.gt(0);
  });
});
```

### é›†æˆæ¸¬è©¦
ä½¿ç”¨ Mainnet Forking æ¸¬è©¦èˆ‡çœŸå¯¦å”è­°çš„äº¤äº’ï¼š

```javascript
await network.provider.request({
  method: "hardhat_reset",
  params: [{
    forking: {
      jsonRpcUrl: process.env.MAINNET_RPC_URL,
      blockNumber: 15000000
    }
  }]
});
```

## ğŸ“š å­¸ç¿’è³‡æº

### æ•™ç¨‹
- [Uniswap V2 æ·±åº¦è§£æ](https://docs.uniswap.org/protocol/V2/introduction)
- [Aave é–‹ç™¼æ–‡æª”](https://docs.aave.com/developers/)
- [Curve Finance ç™½çš®æ›¸](https://curve.fi/whitepaper)

### ç¯„ä¾‹ä»£ç¢¼
- [Uniswap V2 Core](https://github.com/Uniswap/v2-core)
- [Compound Protocol](https://github.com/compound-finance/compound-protocol)
- [Yearn Vaults](https://github.com/yearn/yearn-vaults)

### å·¥å…·
- [DeFi Llama](https://defillama.com/) - TVL è¿½è¹¤
- [Tenderly](https://tenderly.co/) - æ™ºèƒ½åˆç´„ç›£æ§
- [Dune Analytics](https://dune.com/) - å€å¡Šéˆæ•¸æ“šåˆ†æ

## ğŸš€ å¿«é€Ÿé–‹å§‹

### 1. å…‹éš†å°ˆæ¡ˆ
```bash
cd blockchain-apps/defi-projects
cd dex-swap  # æˆ–å…¶ä»–å°ˆæ¡ˆ
```

### 2. å®‰è£ä¾è³´
```bash
npm install
# æˆ–
pnpm install
```

### 3. ç·¨è­¯åˆç´„
```bash
npx hardhat compile
```

### 4. é‹è¡Œæ¸¬è©¦
```bash
npx hardhat test
```

### 5. éƒ¨ç½²åˆ°æœ¬åœ°ç¶²çµ¡
```bash
npx hardhat node
npx hardhat run scripts/deploy.js --network localhost
```

### 6. å•Ÿå‹•å‰ç«¯
```bash
cd frontend
npm run dev
```

## ğŸ’¡ AI è¼”åŠ©é–‹ç™¼æŠ€å·§

### ä½¿ç”¨ AI ç”Ÿæˆæ¸¬è©¦
```
æç¤ºè©ï¼šç‚ºé€™å€‹ AMM åˆç´„ç”Ÿæˆå®Œæ•´çš„å–®å…ƒæ¸¬è©¦ï¼ŒåŒ…æ‹¬ï¼š
- æ·»åŠ æµå‹•æ€§æ¸¬è©¦
- ä»£å¹£äº¤æ›æ¸¬è©¦
- ç§»é™¤æµå‹•æ€§æ¸¬è©¦
- é‚Šç•Œæ¢ä»¶æ¸¬è©¦
```

### ä½¿ç”¨ AI é€²è¡Œå®‰å…¨å¯©è¨ˆ
```
æç¤ºè©ï¼šå¯©æŸ¥é€™å€‹å€Ÿè²¸åˆç´„çš„å®‰å…¨æ€§ï¼Œé‡é»æª¢æŸ¥ï¼š
- é‡å…¥æ”»æ“Š
- æ•´æ•¸æº¢å‡º
- è¨ªå•æ§åˆ¶
- åƒ¹æ ¼æ“ç¸±
```

### ä½¿ç”¨ AI å„ªåŒ– Gas
```
æç¤ºè©ï¼šåˆ†æé€™å€‹åˆç´„ä¸¦æä¾› gas å„ªåŒ–å»ºè­°
```

## ğŸ“Š å°ˆæ¡ˆç‹€æ…‹

| å°ˆæ¡ˆ | ç‹€æ…‹ | æ¸¬è©¦è¦†è“‹ç‡ | å¯©è¨ˆ |
|------|------|-----------|------|
| DEX Swap | âœ… å®Œæˆ | 95% | â³ å¾…å¯©è¨ˆ |
| Lending Protocol | âœ… å®Œæˆ | 90% | â³ å¾…å¯©è¨ˆ |
| Yield Farming | âœ… å®Œæˆ | 88% | â³ å¾…å¯©è¨ˆ |

## âš ï¸ å…è²¬è²æ˜

**é‡è¦æç¤º**ï¼š
- é€™äº›å°ˆæ¡ˆåƒ…ä¾›æ•™è‚²å’Œå­¸ç¿’ç”¨é€”
- æœªç¶“å°ˆæ¥­å®‰å…¨å¯©è¨ˆï¼Œè«‹å‹¿åœ¨ä¸»ç¶²ä¸Šä½¿ç”¨
- DeFi æŠ•è³‡å­˜åœ¨é«˜é¢¨éšªï¼Œå¯èƒ½æå¤±å…¨éƒ¨è³‡é‡‘
- ä½¿ç”¨å‰è«‹å‹™å¿…é€²è¡Œå……åˆ†çš„ç›¡è·èª¿æŸ¥

## ğŸ¤ è²¢ç»

æ­¡è¿æäº¤ Pull Request æˆ–é–‹å•Ÿ Issueï¼

## ğŸ“ æˆæ¬Š

MIT License

---

[è¿”å› Blockchain Apps ä¸»é ](../README.md)
